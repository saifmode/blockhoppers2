{"version":3,"sources":["game/classes/Hopper.js","game/eventListeners.js","game/classes/Selector.js","game/game.js"],"names":["Hopper","x","y","radius","config","hopper","left","right","bottom","movement","direction","dx","physics","speed","dy","terminal","isWallToLeft","block","includes","gameBoard","gridY","gridX","isWallToRight","isFloorBelowHopper","isNoFloorBelowHopper","empty","Math","floor","board","spacing","px_blockTop","canvas","height","width","min","gravity","draw","c","save","beginPath","fillStyle","color","arc","PI","fill","closePath","restore","mouse","mousedown","window","addEventListener","event","Selector","homeX","homeY","dragging","draggingBlock","whatBlockWas","newX","newY","isOverlappingBlock","hasStartedDraggingBlock","isDraggingEmptySquare","hasStoppedDragging","isPainting","squareIsEmpty","isOverlappingHopper","hoppers","some","hopperGridX","hopperGridY","address","homeAddresses","filter","current","home","forEach","fillRect","shadowColor","shadowBlur","strokeStyle","rect","stroke","document","querySelector","getContext","size","mode","random","adventure","editor","level","selector","init","push","gameLoop","requestAnimationFrame","update"],"mappings":"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EID,ACwBD1D,EAAAA,CAAC,CAACG,MDxBGwB,EFJC,CG4BN,GAAc,CH5BHzD,GEII,EFJT,CEIY,ACwBlB,EH5BmB,CAACc,KAAK,CEIpB2C,EFJuB,CAAT,IAAc5D,GEIf,UFJsBwB,KAAP,CAAaC,OAA5C,EAAqD;AACpD,AEGe,ACyBlBQ,EAAAA,CAAC,CAACwC,QAAF,CAAW,CAAX,CH5BQnE,AEGgBsC,CCyBV,CAAd,EAAiBjB,KH5Bd,CG4BoB,CAACE,CH5BJ,IG4BpB,EH5BG,AG4B4BF,MAAM,CAACC,IDzBD,ECyBrC,GDzByC,CAACwB,aAAxB;AFFf,AEEe,AC0BlBnB,EAAAA,CAAC,CAACO,GD1BD,CC0BD,GALmB,CAOnB;AH7BE,AG+BF,OHhES,CAmCR;AEAA,UAAIqB,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACzB,AC6BF,OAAK,IAAI/D,CD7BH,AC6BI,GAAG,CAAb,EAAgBA,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAa0D,IAAjC,EAAuCpF,CAAC,EAAxC,EAA4C;AH7B3C,AECE,AC6BF,SAAK,CH9BDc,GG8BKf,CAAC,GD7BDkB,AC6BI,CAAb,EAAgBlB,CAAC,CH9BD,EAAhB,AG8BoBG,EH9BA,IG8BM,CAACwB,ED7BRR,GC6BC,CAAakE,CD7BxB,EAAiBjE,CC6B1B,EAAuCpB,CAAC,CD7B/B,CC6BT,EAA4C,ED7BR,CAAlC;AFAD,AECC,AC6BD,SD/BA,CAEE,EFDE,EG8BIkB,GH9BCb,IAAL,EG8Ba,CH9BDe,AG8BEnB,CAAD,CAAT,CD7BA,AC6BaD,CAAb,CH9Ba,AG8BrB,GH9BwBG,aAAOwB,KAAP,CAAaC,OAArC,EAA8C;AAC7C,AECA,AC6BA,aAAK,CAAL,CH9BKnB,EECE,KAAP,EFDA,GAAiB,OAAjB;AACA,AECA,AC6BC2B,UAAAA,CAAC,CAACG,SAAF,GAAc,OAAd;AH7BF,AECA,AC6BE,OHtEK,AEmCR,CFOA;;AEAA,AC6BE,UD7BE0B,GC6BG,CAAL,eD7BqB,GAAG,SAAtBA,mBAAsB;AFC1B,AED0B,AC8BvB7B,UH5BF,AG4BEA,CAAC,CAACG,GH5BC/B,AEDL0D,MC6BE,EH5BF,CG4BgBwB,GH5BC,EEDTvB,AC6Ba,CAAC3B,GD7BtB,CAAa,CC6BX,CH5BF,IACAjB,IEFanB,MAAM,EAAI,QFEH,EADpB,IAEA,KAAKG,MAAL,GAAc,CAAd,GAAkB,CAACY,KAAK,GAAG,CAAT,IAAchB,aAAOwB,KAAP,CAAaC,OAF7C,KAGE,KAAKvB,IAAL,GAAY,CAAZ,GAAgBe,KAAK,GAAGjB,aAAOwB,KAAP,CAAaC,OAArC,IACD,KAAKnB,SAAL,IAAkB,OADlB,IAEC,KAAKH,KAAL,GAAa,CAAb,GAAiB,CAACc,KAAK,GAAG,CAAT,IAAcjB,aAAOwB,KAAP,CAAaC,OAA5C,IACA,KAAKnB,SAAL,IAAkB,MANpB,CADD,EAQE;AACD,AERC,AC6BC,aHrBGD,CERA,OFQL,GAAgB,SAAhB;AACA,AERE,OF7CK,CAuDR,QEVO4D,WAAW,GAAG3C,IAAI,CAACC,KAAL,CACjBtB,MAAM,CAACJ,CAAP,GAAWG,aAAOwB,KAAP,CAAaC,OADP,CAAlB;AAGA,AC0BD,aAAK,CAAL,ED1BKyC,WAAW,GAAG5C,IAAI,CAACC,KAAL,CACjBtB,MAAM,CAACH,CAAP,GAAWE,aAAOwB,KAAP,CAAaC,OADP,CAAlB;AAGA,ACwBAQ,UAAAA,CAAC,CAACG,ODxBKkB,ECwBP,EDxBW,CCwBG,GDxBCW,GCwBf,QDxBO,IAAuBV,IAAI,IAAIW,WAAtC;AFKH,AEJG,ACwBA,UHpBC,CEZF,CAQE,GFIK9D,MAAL,GAAc,KAAKM,AEJb,EFIN,GAAwBiB,aAAOC,MAAnC,EAA2C;AAC1C,AEJE,aFIG9B,CAAL,GAAS,CAAT,CEJS,KAAP;AFKF,AEJE,ACuBD,aAAK,CAAL;ADtBA,ACuBCmC,SDnCF,CADyB,ACoCvBA,CAAC,CAACG,SAAF,GAAc,MAAd;AHlBH,AElB0B,ACqCvB,ODrCH,GFkBI,KAAKvC,CAAL,GAAS8B,aAAOE,KAApB,EAA2B;AAC1B,aAAKhC,CAAL,GAAS,CAAT;AACA,AELD,ACuBE,UDvBE4D,GCuBG,CAAL,mBDvByB,EAA3B,EAA+B;AAC9B,ACuBExB,UAAAA,CAAC,CDvBCkC,ACuBA/B,ODvBO,ECuBT,CDvBYgC,ECuBE,OAAd,WDvB0BC,MAAd,CACb,UAAAF,OAAO;AFKT,AELS,ACuBN,UHlBC,KAAKtE,CAAL,CEJDsE,EFIU,CAAb,EAAgB,EEJN,CAACG,OAAR,CAAgBzE,CAAhB,IAAqBoB,KAArB,IAA8BkD,OAAO,CAACG,OAAR,CAAgBxE,CAAhB,IAAqBkB,KAD7C;AFMR,AENQ,SADM,EAGZ,CAHY,CFOTnB,AEPL,CFOA,GAAS8B,aAAOE,KAAhB;AACA,AGiBC,OHnFM,CAoER,KGeO,CAAL;ADrBD,ACsBEI,UAAAA,CAAC,CAACG,CDtBCa,KAAL,GAAakB,ACsBX,GAAc,IDtBI,CAACI,GCsBnB,CDtBW,CAAa1E,CAAb,GAAiBG,aAAOwB,KAAP,CAAaC,OAA3C;AACA,ACsBE,aDtBGyB,KAAL,GAAaiB,OAAO,CAACI,IAAR,CAAazE,CAAb,GAAiBE,aAAOwB,KAAP,CAAaC,OAA3C;AFMD,AELC,ACGA,aDHK4B,CFKE,KAAKhD,MELZ,EFKD,CELqBU,gBAAUC,KAAV,EAAiBC,KAAjB,CAApB;AFMA,AELA,aFKK,AELAkC,QAAL,CFKA,EELgB,IAAhB;AFMC,AELD,ACqBAlB,MAAAA,CAAC,CAACC,IAAF,CDrBKkB,EFKC7C,EAAL,GAAU,CAAV,KELD,GAAqB,IAArB;AFMC,AELDQ,ACqBAkB,MAAAA,CAAC,CAACE,OHhBIzB,EAAL,AGgBD,GHhBWY,IAAI,AELLN,CFKMc,GAAL,CACT,AENF,EAAiBb,GFMVP,EAAL,AENF,GFMYV,CENc,CAA1B,WFMmBQ,OAAP,CAAeuB,OADhB,EAET/B,aAAOQ,OAAP,CAAeG,QAFN,CAAV;AAIA,AERD,ACqBAsB,MAAAA,CDhCD,ACgCE,CAACwC,KDrBI,EFQA3E,CAAL,AGaD,CDrBU4D,ACsBT7D,CAAC,EHdS,CGcNG,IHdWU,EAAf,AGcU,CAACc,KAAP,CAAaC,IDtBa,EAAzB,CCqBN,CDrBmC,CCuBlC3B,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAaC,OAFlB,EAGC5B,CAAC,GAAGG,MAAM,CAACwB,KAAP,CAAaC,OAAjB,GAA2BzB,MAAM,CAACwB,KAAP,CAAaC,OAHzC,EAIC3B,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAaC,OAAjB,GAA2BzB,MAAM,CAACwB,KAAP,CAAaC,OAJzC;AHZC,AERD,AC0BAQ,MAAAA,CAAC,CAACO,IAAF,CD1BKW,QAAL,GAAgB,IAAhB;AACA,AC0BAlB,MAAAA,CAAC,CAACQ,KD1BGW,IC0BL,SD1BA,GAAqB,KAArB;AFQA,AEPA,AC0BAnB,MAAAA,CAAC,CAACS,KHnBG,EGmBL,OHnBA;AACC,AGmBD,eHnBMnC,EAAL,GACC,KAAKD,SAAL,IAAkB,OAAlB,GACGN,aAAOQ,OAAP,CAAeC,KADlB,GAEG,CAACT,aAAOQ,OAAP,CAAeC,KAHpB;AAIA,AEVF,AC0BA,GA5CkB,CA6CnB,MD3BKqD,KFUGpD,EAAL,GAAU,CAAV,QEVqB,MAAM,KAAKyC,QAAlC,EAA4C;AFW1C,AEVD,aAAKnB,EFUCnC,CAAL,CEVD,GFUW,KAAKU,EAAf;AACA,AEVD;AFND,AEOC,ACyBFiF,EAAAA,KHrGS,AEyER,CFeA,EGaO,CAACK,EDzBD,IAAIlC,ACyBZ,GA9CmB,CAgDnB,cD3B8B,EAAtB,EAA0B;AAChCS,4BAAcI,OAAd,CAAsB,UAAAL,OAAO,EAAI;AAChC,AC0BHJ,EAAAA,OAAO,CAACS,IDzBJL,GCyBJ,CAAgB,GDzBL,CAACI,IAAR,CAAa1E,CAAb,ACyBYI,IDxBXqB,ECwBiB,EDxBb,CAACC,KAAL,CAAW,KAAI,CAAC0B,KAAL,GAAajD,aAAOwB,KAAP,CAAaC,OAArC,CADD,IAEA0C,OAAO,CAACI,IAAR,CAAazE,CAAb,IACCwB,IAAI,CAACC,KAAL,CAAW,KAAI,CAAC2B,KAAL,GAAalD,aAAOwB,KAAP,CAAaC,OAArC,CAJF,EAKE;AFMJ,AELG0C,ACoBkB,WHfhBjE,AGeoBD,CDpBtBkE,GFKH,EGe+B,CHfnB,AGeoB0B,CDpBtB,CAACvB,GFKMzE,CAAL,AGea,EAAJ,CHfA,AELlB,CAAgBA,CAAhB,GFKuBE,AELHuD,IAApB,EFKH;AACA,AELGa,ACmBkB,GAAtB,QHdMhE,CELFgE,IFKH,GAAa,AELH,CAACG,IFKOzE,CAAL,EELV,CFKmB,AELHC,CAAhB,GAAoByD,CFKIxD,GELxB,GFKH;AACA,AELG,ACmBJ,WHdMK,MAAL,GAAc,KAAKN,CAAL,GAAS,KAAKC,MAA5B;AAEA,AENE,SAVD,EFgBIiC,IAAL;AACA,AGaFyD,IAAI;ADnBD1E,ACoBH4E,QAAQ,gBDpBKpC,IAAV,EAAgBD,IAAhB,IAAwB,KAAKD,YAA7B;AACA,aAAKF,QAAL,GAAgB,KAAhB;2BFOK;AACNlB,AEPC,YAAI,EFOHC,GEPQkB,CFOV,YEPC,EAAwB;AACvBnB,kBAAEG,SAAF,GAAc,MAAd;AFOFH,cAAEE,SAAF;AENEF,kBAAEwC,QAAF,CACC,KAAK5E,CADN,EAEC,KAAKC,CAFN,EAGCE,aAAOwB,KAAP,CAAaC,OAHd,EAICzB,aAAOwB,KAAP,CAAaC,OAJd;AFOFQ,AEDE,cFCAG,SAAF,GAAcpC,aAAOC,MAAP,CAAcoC,KAA5B;;AACAJ,AEDC,aAAKmB,CFCJd,GAAF,CAAM,KAAKzC,CAAX,EAAc,AEDb,GAAqB,EFCHC,CAAnB,EAAsB,AEDrB,KFC0BC,MAA3B,EAAmC,CAAnC,EAAsCuB,IAAI,CAACiB,EAAL,GAAU,CAAhD,EAAmD,IAAnD;AEAC,OAxBM,MAwBA,IACNqB,UAAU,MACVC,aAAa,EADb,IAEAlB,sBAAM9C,CAAN,GAAU,KAAKoD,KAAL,GAAajD,aAAOwB,KAAP,CAAaC,OAAb,GAAuB,CAF9C,IAEmD;AFFpDQ,AEGCU,cFHCH,IAAF,UEGO3C,CAAN,GAAU,KAAKoD,KAAL,GAAajD,aAAOwB,KAAP,CAAaC,OAHpC,IAIAkB,sBAAM7C,CAAN,GAAU,KAAKoD,KAAL,GAAalD,aAAOwB,KAAP,CAAaC,OAAb,GAAuB,CAJ9C,IAKAkB,sBAAM7C,CAAN,GAAU,KAAKoD,KAAL,GAAalD,aAAOwB,KAAP,CAAaC,OALpC,IAMAkB,sBAAM9C,CAAN,GAAU8B,aAAOE,KANjB,IAOAc,sBAAM9C,CAAN,IAAW,CAPX,IAQA8C,sBAAM7C,CAAN,GAAU6B,aAAOC,MARjB,IASAe,sBAAM7C,CAAN,IAAW,CAVL,EAWL;AACD,aAAKD,CAAL,GACCyB,IAAI,CAACC,KAAL,CAAWoB,sBAAM9C,CAAN,GAAUG,aAAOwB,KAAP,CAAaC,OAAlC,IACAzB,aAAOwB,KAAP,CAAaC,OAFd;AFVDQ,AEaC,aAAKnC,CFbJ2C,AEaD,GACCnB,IAAI,CAACC,CFdP,IEcE,CAAWoB,sBAAM7C,CAAN,GAAUE,aAAOwB,KAAP,CAAaC,OAAlC,IACAzB,aAAOwB,KAAP,CAAaC,OAFd;AAGA;AFfDQ,cAAES,OAAF;AACA,AEiBA,UAAIkB,UAAU,EAAd,EAAkB;AACjB,aAAK5B,IAAL;AACA;AACD;;;2BAEM;AACNC,cAAEC,IAAF;;AACAD,cAAEE,SAAF;;AACAF,cAAEyC,WAAF,GAAgB,OAAhB;AACAzC,cAAE0C,UAAF,GAAe,EAAf;AACA1C,cAAE2C,WAAF,GAAgB,gBAAhB;AACA3C,cAAEG,SAAF,GAAc,sBAAd;;AACAH,cAAE4C,IAAF,CACC,KAAK5B,KAAL,GAAajD,aAAOwB,KAAP,CAAaC,OAD3B,EAEC,KAAKyB,KAAL,GAAalD,aAAOwB,KAAP,CAAaC,OAF3B,EAGCzB,aAAOwB,KAAP,CAAaC,OAAb,GAAuB,CAHxB,EAICzB,aAAOwB,KAAP,CAAaC,OAAb,GAAuB,CAJxB;;AAMAQ,cAAEO,IAAF;;AACAP,cAAE6C,MAAF;;AACA7C,cAAEQ,SAAF;;AACAR,cAAES,OAAF;;AAEAT,cAAEG,SAAF,GAAc,QAAd;;AACAH,cAAEwC,QAAF,CAAW,KAAK5E,CAAhB,EAAmB,KAAKC,CAAxB,EAA2BE,aAAOwB,KAAP,CAAaC,OAAxC,EAAiDzB,aAAOwB,KAAP,CAAaC,OAA9D;AACA","file":"game.ff0916f4.js","sourceRoot":"..","sourcesContent":["import { config } from \"../game.js\";\nimport { c } from \"../game.js\";\nimport { canvas } from \"../game.js\";\nimport { gameBoard } from \"../game.js\";\n\nexport default class Hopper {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.radius = config.hopper.radius;\n\t\t// Collision detectors\n\t\tthis.left = x - this.radius;\n\t\tthis.right = x + this.radius;\n\t\tthis.bottom = y + this.radius;\n\t\t// Movement\n\t\tthis.movement = \"falling\";\n\t\tthis.direction = \"right\";\n\t\t// Physics\n\t\tthis.dx = config.physics.speed;\n\t\tthis.dy = config.physics.speed;\n\t\tthis.terminal = config.terminal;\n\t}\n\n\tupdate() {\n\t\t// HELPER FUNCTIONS\n\t\tlet isWallToLeft = () => block.includes(gameBoard[gridY][gridX - 1]);\n\t\tlet isWallToRight = () => block.includes(gameBoard[gridY][gridX + 1]);\n\t\tlet isFloorBelowHopper = () =>\n\t\t\tblock.includes(gameBoard[gridY + 1][gridX]);\n\t\tlet isNoFloorBelowHopper = () =>\n\t\t\tempty.includes(gameBoard[gridY + 1][gridX]);\n\n\t\t// COLLISIONS\n\t\t// First translate current px coordinates as grid coordinates\n\t\tlet gridX = Math.floor(this.x / config.board.spacing);\n\t\tlet gridY = Math.floor(this.y / config.board.spacing);\n\n\t\tlet block = [1, 2]; // These correspond to blocks that hoppers can't move through\n\t\tlet empty = [0, 4]; // Correspond to empty squares or exit\n\n\t\tlet px_blockTop = (gridY + 1) * config.board.spacing; // y coordinate of top of block\n\n\t\t// Test collision with floor\n\t\tif (isFloorBelowHopper()) {\n\t\t\t// See if square below hopper is an impenetrable block\n\t\t\tif (this.bottom + this.dy > px_blockTop) {\n\t\t\t\tthis.movement = \"rolling\";\n\t\t\t\tthis.y = px_blockTop - this.radius; // Correcting position\n\t\t\t}\n\t\t}\n\n\t\t// Test collision with wall to the right of hopper\n\t\tif (isWallToRight()) {\n\t\t\tif (this.right > (gridX + 1) * config.board.spacing) {\n\t\t\t\tthis.direction = \"left\";\n\t\t\t}\n\t\t}\n\n\t\t// Test collision with wall to the left of hopper\n\t\tif (isWallToLeft()) {\n\t\t\tif (this.left < gridX * config.board.spacing) {\n\t\t\t\tthis.direction = \"right\";\n\t\t\t}\n\t\t}\n\n\t\t// Make hopper fall if it rolls off an edge\n\t\tif (\n\t\t\tthis.movement == \"rolling\" &&\n\t\t\tisNoFloorBelowHopper() &&\n\t\t\tthis.bottom + 1 > (gridY + 1) * config.board.spacing &&\n\t\t\t((this.left + 1 > gridX * config.board.spacing &&\n\t\t\t\tthis.direction == \"right\") ||\n\t\t\t\t(this.right - 1 < (gridX + 1) * config.board.spacing &&\n\t\t\t\t\tthis.direction == \"left\"))\n\t\t) {\n\t\t\tthis.movement = \"falling\";\n\t\t}\n\n\t\t// Wrap around\n\t\tif (this.bottom + this.dy > canvas.height) {\n\t\t\tthis.y = 0;\n\t\t}\n\n\t\tif (this.x > canvas.width) {\n\t\t\tthis.x = 0;\n\t\t}\n\n\t\tif (this.x < 0) {\n\t\t\tthis.x = canvas.width;\n\t\t}\n\n\t\t// MOVEMENT\n\t\tswitch (this.movement) {\n\t\t\tcase \"falling\":\n\t\t\t\tthis.dx = 0;\n\t\t\t\tthis.dy = Math.min(\n\t\t\t\t\tthis.dy + config.physics.gravity,\n\t\t\t\t\tconfig.physics.terminal\n\t\t\t\t);\n\t\t\t\tthis.y += this.dy;\n\t\t\t\tbreak;\n\t\t\tcase \"rolling\":\n\t\t\t\tthis.dx =\n\t\t\t\t\tthis.direction == \"right\"\n\t\t\t\t\t\t? config.physics.speed\n\t\t\t\t\t\t: -config.physics.speed;\n\t\t\t\tthis.dy = 0;\n\t\t\t\tthis.x += this.dx;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Update collision detectors\n\t\tthis.left = this.x - this.radius;\n\t\tthis.right = this.x + this.radius;\n\t\tthis.bottom = this.y + this.radius;\n\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.fillStyle = config.hopper.color;\n\t\tc.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tc.fill();\n\t\tc.closePath();\n\t\tc.restore();\n\t}\n}\n","export const mouse = { x: 900, y: 900 };\nexport let mousedown = false;\n\nwindow.addEventListener(\"mousemove\", () => {\n\tmouse.x = event.x;\n\tmouse.y = event.y;\n});\n\nwindow.addEventListener(\"mousedown\", () => {\n\tmousedown = true;\n});\nwindow.addEventListener(\"mouseup\", () => {\n\tmousedown = false;\n});\n","import { config } from \"../game.js\";\nimport { c } from \"../game.js\";\nimport { canvas } from \"../game.js\"\nimport { gameBoard } from \"../game.js\";\nimport { homeAddresses } from \"../game.js\";\nimport { mouse } from \"../eventListeners.js\";\nimport { mousedown } from \"../eventListeners.js\";\nimport { hoppers } from \"../game.js\";\n\n// During init() we log all movable blocks and create an array of objects that stores the block's home address\n// and current address. Initially home and current are the same.\n// When user first drags a block, its home address is stored in this selector object.\n// Then when user drags the block to another location, we search the 'addresses' array\n// for an object that matches the home address stored in this selector.\n// Its new location is then stored in 'current'.\n// The implication of this is that when the user goes to drag the block again, we loop through this process\n// Only this time, the current address is different to the home address.\n// The home address is referenced when dragging the block around, so that we can't pull the block\n// more than one square away in any direction.\n// Doing things this way means we don't have to have an object for every block, which\n// gives primacy to the level map.\n// This makes life easier when it comes to being able to edit levels etc.\n// We also don't have to loop through a list of block objects every frame, because collisions are handled by\n// the hopper object which only checks for collisions within one square of itself,\n// and the loops in this object are only called when we drag a block.\n\nexport default class Selector {\n\tconstructor() {\n\t\tthis.x = null;\n\t\tthis.y = null;\n\t\tthis.homeX = null;\n\t\tthis.homeY = null;\n\t\tthis.dragging = false;\n\t\tthis.draggingBlock = false;\n\t\tthis.whatBlockWas = null;\n\t}\n\n\tupdate() {\n\t\tlet gridX = Math.floor(mouse.x / config.board.spacing);\n\t\tlet gridY = Math.floor(mouse.y / config.board.spacing);\n\t\tlet newX = Math.floor(this.x / config.board.spacing);\n\t\tlet newY = Math.floor(this.y / config.board.spacing);\n\n\t\t// Helper functions\n\t\tlet isOverlappingBlock = () => {\n\t\t\ttry {\n\t\t\t\treturn gameBoard[gridY][gridX] == 1;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tlet hasStartedDraggingBlock = () =>\n\t\t\t!this.dragging && mousedown && isOverlappingBlock();\n\t\tlet isDraggingEmptySquare = () =>\n\t\t\t!this.dragging && mousedown && !isOverlappingBlock();\n\t\tlet hasStoppedDragging = () => this.dragging && !mousedown;\n\t\tlet isPainting = () => mousedown && this.draggingBlock;\n\t\tlet squareIsEmpty = () => {\n\t\t\ttry {\n\t\t\t\treturn gameBoard[gridY][gridX] == 0;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\tlet isOverlappingHopper = () =>\n\t\t\thoppers.some(hopper => {\n\t\t\t\ttry {\n\t\t\t\t\tlet hopperGridX = Math.floor(\n\t\t\t\t\t\thopper.x / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\tlet hopperGridY = Math.floor(\n\t\t\t\t\t\thopper.y / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\treturn newX == hopperGridX && newY == hopperGridY;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (hasStartedDraggingBlock()) {\n\t\t\tlet address = homeAddresses.filter(\n\t\t\t\taddress =>\n\t\t\t\t\taddress.current.x == gridX && address.current.y == gridY\n\t\t\t)[0];\n\t\t\tthis.homeX = address.home.x * config.board.spacing;\n\t\t\tthis.homeY = address.home.y * config.board.spacing;\n\t\t\tthis.whatBlockWas = gameBoard[gridY][gridX];\n\t\t\tthis.dragging = true;\n\t\t\tthis.draggingBlock = true;\n\t\t\tgameBoard[gridY][gridX] = 0;\n\t\t} else if (isDraggingEmptySquare()) {\n\t\t\tthis.dragging = true;\n\t\t\tthis.draggingBlock = false;\n\t\t}\n\n\t\tif (isOverlappingHopper() && this.dragging) {\n\t\t\tthis.draw();\n\t\t\treturn;\n\t\t} else if (hasStoppedDragging()) {\n\t\t\thomeAddresses.forEach(address => {\n\t\t\t\tif (\n\t\t\t\t\taddress.home.x ==\n\t\t\t\t\t\tMath.floor(this.homeX / config.board.spacing) &&\n\t\t\t\t\taddress.home.y ==\n\t\t\t\t\t\tMath.floor(this.homeY / config.board.spacing)\n\t\t\t\t) {\n\t\t\t\t\taddress.current.x = newX;\n\t\t\t\t\taddress.current.y = newY;\n\t\t\t\t}\n\t\t\t});\n\t\t\tgameBoard[newY][newX] = this.whatBlockWas;\n\t\t\tthis.dragging = false;\n\t\t\tif (this.draggingBlock) {\n\t\t\t\tc.fillStyle = \"pink\";\n\t\t\t\tc.fillRect(\n\t\t\t\t\tthis.x,\n\t\t\t\t\tthis.y,\n\t\t\t\t\tconfig.board.spacing,\n\t\t\t\t\tconfig.board.spacing\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.draggingBlock = false;\n\t\t} else if (\n\t\t\tisPainting() &&\n\t\t\tsquareIsEmpty() &&\n\t\t\tmouse.x < this.homeX + config.board.spacing * 2 && // Skip these if you want to drag the block anywhere, e.g. during level editing.\n\t\t\tmouse.x > this.homeX - config.board.spacing && \n\t\t\tmouse.y < this.homeY + config.board.spacing * 2 &&\n\t\t\tmouse.y > this.homeY - config.board.spacing &&\n\t\t\tmouse.x < canvas.width &&\n\t\t\tmouse.x >= 0 &&\n\t\t\tmouse.y < canvas.height &&\n\t\t\tmouse.y >= 0\n\t\t) {\n\t\t\tthis.x =\n\t\t\t\tMath.floor(mouse.x / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t\tthis.y =\n\t\t\t\tMath.floor(mouse.y / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t}\n\n\n\t\tif (isPainting()) {\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tdraw() {\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.shadowColor = \"white\";\n\t\tc.shadowBlur = 12;\n\t\tc.strokeStyle = \"rgb(255,191,0)\";\n\t\tc.fillStyle = \"rgba(150,50,100,0.2)\";\n\t\tc.rect(\n\t\t\tthis.homeX - config.board.spacing,\n\t\t\tthis.homeY - config.board.spacing,\n\t\t\tconfig.board.spacing * 3,\n\t\t\tconfig.board.spacing * 3\n\t\t);\n\t\tc.fill();\n\t\tc.stroke();\n\t\tc.closePath();\n\t\tc.restore();\n\n\t\tc.fillStyle = \"orange\";\n\t\tc.fillRect(this.x, this.y, config.board.spacing, config.board.spacing);\n\t}\n}\n","import Hopper from \"./classes/Hopper.js\";\nimport Selector from \"./classes/Selector.js\";\n\nexport const canvas = document.querySelector(\"canvas\");\nexport const c = canvas.getContext(\"2d\");\n\nexport const config = {\n\tboard: {\n\t\tsize: 16,\n\t\tspacing: 32\n\t},\n\n\thopper: {\n\t\tcolor: \"green\",\n\t\tradius: 9\n\t},\n\n\tmode: {\n\t\trandom: true,\n\t\tadventure: false,\n\t\teditor: false\n\t},\n\n\tphysics: {\n\t\tgravity: 0.3,\n\t\tspeed: 1.5,\n\t\tterminal: 9.8\n\t}\n};\n\nexport const level = {\n\tcolor: \"pink\"\n};\n\nexport const selector = new Selector();\n\nexport let homeAddresses = [];\n\ncanvas.width = config.board.size * config.board.spacing;\ncanvas.height = config.board.size * config.board.spacing;\n\nexport const gameBoard = [\n\t[0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 2, 1, 2, 0, 1, 0, 0, 0, 0, 0, 0],\n\t[0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n\t[0, 0, 1, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0],\n\t[0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 2, 2, 1, 0, 0],\n\t[0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] // <- stops falling errors occuring\n];\n\nexport let hoppers = [];\nfunction init() {\n\thoppers = [];\n\thoppers.push(new Hopper(48, 0));\n\n\tfor (let y = 0; y < config.board.size; y++) {\n\t\tfor (let x = 0; x < config.board.size; x++) {\n\t\t\tif (gameBoard[y][x] == 1) {\n\t\t\t\thomeAddresses.push({\n\t\t\t\t\thome: { x: x, y: y },\n\t\t\t\t\tcurrent: { x: x, y: y }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction gameLoop() {\n\trequestAnimationFrame(gameLoop);\n\n\tc.fillStyle = \"black\";\n\tc.fillRect(0, 0, canvas.width, canvas.height);\n\tc.fill();\n\n\t// mouseLogic();\n\n\t// Draw game board\n\tfor (let y = 0; y < config.board.size; y++) {\n\t\tfor (let x = 0; x < config.board.size; x++) {\n\t\t\tswitch (gameBoard[y][x]) {\n\t\t\t\tcase 0:\n\t\t\t\t\tc.fillStyle = \"black\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tc.fillStyle = level.color;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tc.fillStyle = \"grey\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tc.fillStyle = \"blue\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tc.fillStyle = \"white\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 5:\n\t\t\t\t\tc.fillStyle = \"orange\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tc.save();\n\t\t\tc.beginPath();\n\t\t\tc.fillRect(\n\t\t\t\tx * config.board.spacing,\n\t\t\t\ty * config.board.spacing,\n\t\t\t\tx * config.board.spacing + config.board.spacing,\n\t\t\t\ty * config.board.spacing + config.board.spacing\n\t\t\t);\n\t\t\tc.fill();\n\t\t\tc.closePath();\n\t\t\tc.restore();\n\t\t}\n\t}\n\t// Update and draw selector\n\tselector.update();\n\n\t// Update and draw hoppers\n\thoppers.forEach(hopper => hopper.update());\n}\n\ninit();\ngameLoop();\n"]}