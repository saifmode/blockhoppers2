{"version":3,"sources":["game/classes/Hopper.js","game/eventListeners.js","game/classes/Selector.js","game/classes/Painter.js","game/game.js"],"names":["Hopper","x","y","radius","config","hopper","left","right","bottom","movement","direction","dx","physics","speed","dy","terminal","isWallToLeft","block","includes","gameBoard","gridY","gridX","isWallToRight","isFloorBelowHopper","isNoFloorBelowHopper","empty","Math","floor","board","spacing","px_blockTop","canvas","height","width","min","gravity","draw","c","save","beginPath","fillStyle","color","arc","PI","fill","closePath","restore","mouse","mousedown","window","addEventListener","event","debugPanel","document","getElementById","btn_levelEditor","btn_playLevel","innerHTML","painter","homeX","homeY","dragging","draggingBlock","whatBlockWas","mode","selector","Selector","newX","newY","isOverlappingBlock","hasStartedDraggingBlock","isDraggingEmptySquare","hasStoppedDragging","isPainting","squareIsEmpty","isOverlappingHopper","hoppers","some","hopperGridX","hopperGridY","address","homeAddresses","filter","current","home","forEach","fillRect","shadowColor","shadowBlur","strokeStyle","rect","stroke","Painter","console","log","oldHomeX","oldHomeY","colors","list","size","movable","immovable","exit","spawn","querySelector","getContext","level","init","push","gameLoop","requestAnimationFrame","update"],"mappings":";;;;;;;AAAA,AGAA,ADAA,ADGA,AGHA;;ADKA,ADAA,ADLO,AGCP,IHDa+C,KAAK,GAAG;AAAE9C,EAAAA,CAAC,EAAE,GAAL;AAAUC,AGE/B,EHF+BA,CAAC,EAAE;AAAb,CAAd;AGGP;AHFO,IAAI8C,SAAS,GAAG,KAAhB;IDIchD;ACGrB;AECA,ADAA,ADAAiD,AGJO,IAAM7C,EHIP,CAAC8C,GGJY,GAAG,UHItB,CAAwB,WAAxB,EAAqC,YAAM;ADH1C,AGID,ADAA,ADACH,AGJAnB,EHIAmB,AGJAnB,KHIK,AGJA,CHIC3B,CAAN,AGJO,GHIGkD,KAAK,CDJHlD,ACIIA,CDJhB,ACIA,EDJeC,CAAf,EAAkB;AAAA,AGKnB,ADAA,ADAC6C,AGJCoD,EHIDpD,EGJCoD,GHII,CAACjG,AGJD,CHIL,CGJO,EHIGiD,AGLH,KHKQ,CAACjD,CAAhB;AECD,ADAA,ADAC,AGJC2B,CHCF,GGDEA,OAAO,EAAE;AJDT,AGMF,ADAA,ADCAoB,AGRQ,GADc,GHShB,CAACC,EDPAjD,CAAL,GAASA,CAAT,SCOF,CAAwB,WAAxB,EAAqC,YAAM;ADNzC,AGMF,ADAA,ADCC,AGJAI,EAAAA,MAAM,CJHAH,CAAL,AIGO,GJHEA,CAAT,QCOD8C,SAAS,GAAG,IAAZ;ADNC,AGMF,ADAA,ADCC,AGJCP,CHEF,GGFEA,KJHKtC,AIGA,EAAE,IJHP,GAAcC,AIEP,aJFcC,MAAP,CAAcF,MAA5B,CAHiB,CAIjB;AGMF,ADAA,ADCA8C,AGJE9C,IAAAA,EHII,CAAC+C,GGJC,EAAE,WHIV,CAAwB,SAAxB,EAAmC,YAAM;ADNvC,AGMF,ADAA,ADCC,AGPQ,GANa,MJMf5C,IAAL,GAAYL,CAAC,GAAG,ECOjB+C,GDPsB7C,MAArB,ACOQ,GAAG,KAAZ;ADNC,AGMF,ADAA,ADCC,AGHA6D,CHCD,CGDCA,EHKD,EGLK,EAAE,CJJAzD,KAAL,EIPoB,CJOPN,CAAC,GAAG,KAAKE,MAAtB;AACA,AGMF,ADAA,AEDCS,EAAAA,OJLMJ,AIKC,EAAE,IJLR,GAAcN,CAAC,GAAG,KAAKC,MAAvB,CAPiB,CAQjB;AGMF,ADAA,ADEO,AGHLgC,IHGWiB,AGHXjB,OAAO,EAAE,CHGY,EGJb,CHIgBkB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;ADPL,AGMF,ADAA,AEDEzC,IAAAA,KJLKJ,AIKA,EAAE,GAFC,GJHR,GAAgB,SAAhB;AACA,AGMF,ADAA,ADCO,AGFLM,IHEWwC,AGFXxC,KJLKL,GIKG,EAAE,IJLV,CCO0B,EDPT,CCOY2C,MDP7B,CAViB,CAWjB,ACMqC,CAACC,cAAT,CAAwB,cAAxB,CAAxB;AEAP,ADAA,AELU,GAbY;AJapB,AGMF,ADAA,ADAO,AGAN2C,EAAAA,EHAYzC,IGAN,CJNA7C,CIME,CJNP,GAAUP,GCMc,GAAGiD,ODNVzC,CCMkB,CAAC0C,KDN1B,CAAezC,KAAzB,GCM2B,CAAwB,YAAxB,CAAtB;ADLL,AIMAY,IDCmBmE,ADAA1B,AEDnBzC,KJNKX,AIMA,EJNL,AIMO,GJNGV,IIKH,SJLUQ,OAAP,CAAeC,KAAzB;AACA,ACMF0C,AGAE6C,IAAAA,KJNKrF,EIME,EAAE,EHAI,CAACmC,CDNd,EIIO,CJJS9C,YCMlB,CDNyBW,ACMQ,OAAjC,CDNE,CCMwC,YAAM;ADL9C,ACMDqC,AGACiD,EHADjD,EGACiD,QHAS,CAAC5C,AGAD,EAAE,MAHJ,CHGR,GAAuB,eAAvB;AEAA,ADAA,ADCAC,AGAC4C,IAAAA,IAAI,EAAE,MHACrG,CAAR,AGJQ,GHII,CEDE,CDAA,EDCd;AEDc,ADAA,ADEdyD,AGAC6C,IAAAA,KAAK,EAAE,KHAArG,CAAR,GAAY,IAAZ;AACAwD,AGNQ,gBHMAC,KAAR,GAAgB,IAAhB;AEFC,ADAA,ADGDD,AG1BqB,CAAf,QDuBAzD,ADAAA,CCAL,ADAA,GCAS,ADAA,GDGF2D,CEHP,ADAA,IDGD,GAAgB,IAAhB,CDRS;AACR,AGKA,ADAA,ADGDF,SEHMxD,ADAAA,CCAL,ADAA,GCAS,ADAA,GDGF2D,CEHP,ADAA,ODGD,GAAmB,KAAnB;ADPC,AGKA,ADAA,ADGDH,AGDDtD,MAAM,CAAC6F,EDFAtC,ADAAA,CFLD3C,GION,CDFE,ADAA,AEEYkF,EHCLpC,CEHM,ADAA,CEEf,GDFE,ADAA,AEEmB,CJPH,AIOI1D,GJPD,GIOO,CHC3B,AGD4B6F,GHCJ,EDRnBjF,CIOgB,CAAcS,CHCnC,IGDoB,EAAsBrB,GJPtB,GIO4B,CAAC6F,MAAP,CAAcG,OAApC,EAA6ChG,MAAM,CAAC6F,MAAP,CAAcI,SAA3D,EAAsEjG,MAAM,CAAC6F,MAAP,CAAcM,KAApF,EAA2FnG,MAAM,CAAC6F,MAAP,CAAcK,IAAzG,CAArB;AJPqB,AGMnB,ADAA,ADGD5C,AGAM,IAAM3B,KDHN6B,ADAAA,CEGY,GAAGP,CDHpB,ADAA,CFNyBpC,CCSlB8C,CEHM,ADAA,GFNiB,CAAC7C,AGM/B,ADAA,AEG4B,CAACsF,MHA9B,CDT0B,CAAerF,CCSlB,IAAvB,AGAqB,CAAuB,QAAvB,CAAf,CJT6CC,KAAV,EAAiBC,KAAK,GAAG,CAAzB,CAAf,CAAN;AAAA,AGOnB,ADAA,ADGDjB,ODVC,EGOKyD,ADAAA,MDGCG,EEHN,ADAA,EDGD,CEHiB,ADAA,EDGH,GEHb,ADAA,KDGD;AEFC,ADAA,ADGD,AGDM,CHTP,GGSa3B,CAAC,GAAGN,CDFV+B,ADAAA,KEEgB,CAAC2C,ODFtB,ADAA,GCAqB,ADAA,AEEN,CAAkB,IDFjC,ADAA,AEEe,CAAV;AJTL,AGQA,ADAA,ADGFjD,SEHOO,ADAAA,CFRDzC,GCWO,CAAC4B,OEHZ,ADAA,EFRiB,CGQG,ADAA,EFRA,EGQpB,ADAA,EDGF,CAA+B,IDXzB5B,GCWN,EAAwC,QDXlB,ICWwB;ADXxB,AGSpB,ADAA,ADGD8B,AGFDrB,EHECqB,IGFK,CAACnB,KHEI,AGFX,CHEYwB,EDZgBxC,AIUbb,KJVkB,CAACc,AIUb,CHEpB,AGFqBU,GHEE,EGFT,CAAauE,CJVA,CAAehF,EIU5B,GAAoBf,KHElC,CGFwC,CAACwB,IJVWR,CIUlB,CAAaS,GJVL,EAAiBR,EIU5D,GJViE,GAAG,CAAzB,CAAf,CAAN;AAAA,ACarB4C,AGFDlC,MAAM,CJXJ,AIWKC,MAAP,GAAgB5B,CHENH,CAAT,GAAa,CGFQ,CAAC2B,EHEtB,GGFe,CAAauE,IAAb,GAAoB/F,MAAM,CAACwB,KAAP,CAAaC,OAAjD;AHGCoC,AGDM,IAAMyC,KAAK,GAAG,KHCXxG,CAAT,GAAa,IAAb;ADbC,ACcD+D,AGDAxB,EAAAA,KAAK,EAAE,CJbFlB,OCcIoC,KAAT,GAAiB,GDdM,CCcvB,EDd0B,SAArBpC,kBAAqB;AAAA,ACe1B0C,AGHoB,CAAd,cJXJhD,ECcO2C,GDdF,CAAC1C,CCcR,GAAiB,IDdf,AGSO,ADAA,ADKT,CDdiBC,gBAAUC,KAAK,GAAG,CAAlB,EAAqBC,KAArB,CAAf,CADwB;AAAA,AGUjB,ADAA,ADMT4C,ODhBC,UCgBQJ,QAAT,GAAoB,KAApB;AACAI,AGDM,IAAIgB,aHCDnB,AGDc,GAAG,EAApB,QHCN,GAAyB,KAAzB;ADfC,AGSA,ADAA,ADODG,UDhBKzC,AGSAH,ADAAA,KCAK,ADAA,EDOD0C,CEPIrC,ADAAA,ICAI,ADAA,CCACC,ADAAA,KCAL,ADAA,CCAWoB,ADAAA,ADOxB,CDhByB,ECgBD,CDhBI,GCgB5B,MDhBKvB,SGSyBvB,ADAAA,CCAN,ADAA,GCAUG,ADAAA,OFTN,MGSawB,ADAAA,KCAP,ADAA,CCAaC,ADAAA,OCAlC,ADAA,CCAZ,ADAA;AFT2B,AGU3B,ADAA,ADODzB,AGFM,IAAMe,MDLPC,ADAAA,GEKgB,EJdnBK,AGSQ,ADAA,ADOHuC,CGFiB,CACxB,CDNatC,ADAAA,AEMZ,CHCD,AGDA,CJfO,CAACR,AIeJ,CDNa,ADAA,ADOH,AGDd,CDNkBS,ADAAA,CEMX,CAAP,EAAU,CDNG,ADAA,ADOb,AGDA,CJfE,AGSsBoB,ADAAA,CFTP5B,AIeJ,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CJfDC,AIe3B,EAA+B,CAA/B,EJfgC,AGSFlB,ADAAA,AEMI,CDNV,ADAA,AEMxB,EJfmC,AIeE,CJfpB,AGSiBE,ADAAA,AEMlC,EJfsCiB,AIeE,CAAxC,EAA2C,CAA3C,CJfiB,CAAf,AIe4C,CJhBlB,AIgB5B,CADwB,EAExB,CDPyCO,ADAAA,AEOxC,CAAD,EAAI,CAAJ,CDPkC,ADAA,CCAaC,ADAAA,AEOxC,CAAP,EAAU,CAAV,EAAa,CDPA,ADAA,AEOb,CD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A;AFV/B,AGWC,ADAA,AEoBI,IAAMJ,MJ/BP5C,EGWC,ADAA,AEoBc,GJ/BV,AI+Ba,GJ/BVK,CI+BcwC,GJ/BV,CAACvC,KAAL,CAAW,KAAK1B,CAAL,CI+BD,EJ/BUG,AI+B3B,aJ/BkCwB,KAAP,CAAaC,OAAjC,CAAZ;AACA,AGWE,ADAA,UFXET,KAAK,EGWA,ADAAD,CFXGO,AGWF,CAAD,EAAG,CHXI,AGWP,CHXQC,CGWH,CAAL,EAAO,CHXJ,AGWH,CHXc,CGWJT,GDAAE,CFXSlB,CAAL,GAASE,AGWvB,ADAA,CCAmBe,CDAFE,KAAjB,KAA2B,CFXGO,AEWrC,ICAoCR,CHXN,CAAaS,GGWjB,EAAiBR,EHXjC,CAAZ,EGW4B,CAAnB,CAAP;AHTF,AGUE,ADAA,AEmBG,IAAMqC,KDrBV,ADAA,CFRGzC,AGUD,ADAA,CEmBe,GAAG,CJ7BZ,GAAG,AI6Ba2E,CJ7BZ,CAAD,EAAI,CAAJ,CAAZ,CAdQ,CAcY,AGUX,ADAA,QEmBY,EAAhB;ADlBH,ADAA,iBCAO,ADAA,KCAP,ADAA;AFVF,AGWE,ADAA,UFXEnE,KAAK,GAAG,CAAC,CAAD,EAAI,CAAJ,CAAZ,CAfQ,CAeY;AGYnB,ADAA,AEiBH,ODvBE,ADAA,EEuBOkF,IAAT,GAAgB;AJ3Bd,AI4BDvD,UJ5BKtB,WAAW,GAAG,CAACV,II4BTqC,CJ5Bc,GAAG,CAAT,IAAcrD,AI4BjC,GAAuB,UJ5BiBwB,KAAP,AI4BjC,CJ5B8CC,OAA7C,CAjBQ,CAiB8C;AAEtD,AGUA,ADAA,AEiBD,UDjBKyC,ADAAA,UEiBLM,OAAO,GAAG,EAAV,CDjB4B,ADAA,GCAG,ADAA,SCA1BN,ADAAA,uBCA0B,ADAA;ACAA,ADAA,AEkB/BM,EAAAA,OAAO,CAACgC,IAAR,CDjBE,ADAA,AEiBW,CDjBV,ADAA,GEiBc5G,EDjBV,ADAA,CCAC6D,ADAAA,QCAN,ADAA,ICAkBb,ADAAA,AEiBP,CAAW,EAAX,EAAe,CAAf,CAAb,kBDjBE,ADAA,ICA+BqB,ADAAA,kBCAkB,ADAA,ECDpB,ADAA;AFT9B,AGS8B,ADAA,OCA9B,ADAA,GFTI9C,kBAAkB,EAAtB,EAA0B;AACzB,AI4BF,OAAK,IAAIrB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAauE,IAAjC,EAAuCjG,CAAC,EAAxC,EAA4C;AJ3B1C,AGSD,ADAA,AEmBA,SAAK,CDnBDqE,ADAAA,EFTC,CI4BItE,CAAC,GJ5BAO,AI4BG,CAAb,EAAgBP,CAAC,EJ5BZ,CI4BeG,EJ5BD,II4BO,CJ5BFU,AGSC,ADAA,AEmBEc,EJ5BtB,CGSuB,ADAA,EFTCE,AI4BT,CAAaqE,IAAjC,EDnBI5B,ADAAA,AEmBmCtE,CAAC,EAAxC,CJ5BC,CI4B2C,CJ5BF,eGSd,ADAA;AFR1B,AGQ0B,ADAA,AEoB3B,UAAIkB,KJ5BEV,AGSN,ADAA,CCAC,ADAA,GEmBY,CAACP,CDnBT,ADAA,AEmBQ,CDnBP2D,ADAAA,AEmBF,CJ5BH,AI4BgB5D,CAAb,EJ5Ba,GI4BM,CDnBvB,ADAA,AEmBA,EAA0B,EDnBR+C,ADAAA,CFTjB,wBGSD,ADAA,ICA+B,ADAA,CCACqB,ADAAA,kBCAkB,ADAA,ECDvB,ADAA;AFP1B,AGO0B,ADAA,AEqB1BY,ODrBF,ADAA,CEqBEA,OJ5BK/E,CAAL,GAAS4B,EI4BI,CAAC8E,IAAd,CAAmB,GJ5BC,GAAG,KAAKzG,MAA5B,CAFwC,CAEJ;AACpC,AI4BCiF,UAAAA,IAAI,EAAE;AJ3BR,AGOD,ADAA,AEoBWnF,OJrDH,CA4BR,EGKIuE,ADAAA,EEoBOvE,CAAC,EAAEA,CAAL,YDpBa,ADAA,GCAG,ADAA,SCArBuE,ADAAA,kBCAqB,ADAA;ACAA,ADAA,AEoBRtE,YAAAA,CAAC,EDpBa,ADAA,AEoBXA,KDpBe,ADAA,CCAC4D,ADAAD,QAAL,IAAiB,CCAjB,ADAkBb,ICAI,CAACA,oBDA7B,KCAA;AAAA,ADAA,AEoBhB,ODpBT,ADAA,IEmBqB;AJvBrB,AIyBGmC,UJzBC7D,AIyBD6D,OAAO,EAAE,IJzBK,EAAjB,EAAqB;AACpB,AGID,ADAA,AEoBclF,UDpBVwE,ADAAA,EFJC,AIwBSxE,CAAC,EAAEA,CAAL,CJxBFM,GGII,ADAA,EFJT,CGIY,ADAA,EFJC,CAACc,KAAK,CGIpBoD,ADAAA,EFJuB,CAAT,IAAcrE,GGIf,ADAA,UFJsBwB,KAAP,CAAaC,OAA5C,EAAqD;AACpD,AGGe,ADAA,AEoBG3B,YAAAA,CAAC,EJvBdQ,AGGgBsC,ADAAA,AEoBA9C,SJvBrB,GAAiB,MAAjB,WGGkC,ADAA,KCAI,ADAA,CCAC4D,ADAAA,aCAxB,ADAA;AFFf,AGEe,ADAA,AEoBL,ODpBZ,ADAA;AFDC,AImBoB,OJpDb,CAmCR,CIiBE;ADjBF,ADAA,AEqBE,UDrBEY,ADAAA,aCAa,ADAA,GCAG,ADAA,SCAhBA,ADAAA,aCAgB,ADAA,GCAM,ADAA;ACCzB,ADAA,AEqBA,YDrBI,ADAA;AFAL,AGCE,ADAA,AEqBF,UJtBI1D,OGCKG,ADAAA,KFDO,EAAhB,EAAoB,OGCDC,ADAAA,KCAV,ADAA,ECAiBC,ADAAA,KCAjB,ADAA,KCA2B,ADAA,CCAlC,ADAA;AFAD,AGCC,ADAA,AEqBH,SDvBE,ADAA,CCEE,ADAA,EFDE,KAAKf,IAAL,GAAYe,GGCR,ADAA,EFDa,GAAGjB,aAAOwB,KAAP,CAAaC,OAArC,EAA8C;AAC7C,AGCA,ADAA,eFDKnB,EGCE,ADAA,KCAP,ADAA,EFDA,GAAiB,OAAjB;AACA,AGCA,ADAA,AEqBJ,SAASmG,QAAT,GAAoB;AJrBjB,AGCA,ADAA,AEqBFC,EAAAA,KJ9DS,AGmCR,ADAA,CFOA,eIoBoB,CAACD,QAAD,CAArB;AAEAxE,EAAAA,CAAC,CAACG,SAAF,GAAc,OAAd;ADtBC,ADAA,AEuBDH,EAAAA,CAAC,CAACiD,MDvBGX,ADAAA,EEuBL,CAAW,CAAX,EAAc,CAAd,EAAiB5C,MAAM,CAACE,GDvBA,ADAA,EEuBxB,CDvB2B,ADAA,CEuBIF,MAAM,CAACC,CDvBjC2C,ADAAA,KEuBL,cDvB2B,ADAA;AFC1B,AGD0B,ADAA,AEwB3BtC,EAAAA,CAAC,CAACO,IAAF,EJtBE,CIiBiB,CAOnB,GJxBOnC,AGDLmE,ADAAA,QFCA,IAAiB,EGDTC,ADAAA,ICAR,ADAA,CCAa,ADAA,EFCb,IACArD,IGFanB,ADAAA,MCAM,ADAA,ECAI,ADAA,QFEH,EADpB,IAEA,KAAKG,MAAL,GAAc,CAAd,GAAkB,CAACY,KAAK,GAAG,CAAT,IAAchB,aAAOwB,KAAP,CAAaC,OAF7C,KAGE,KAAKvB,IAAL,GAAY,CAAZ,GAAgBe,KAAK,GAAGjB,aAAOwB,KAAP,CAAaC,OAArC,IACD,KAAKnB,SAAL,IAAkB,OADlB,IAEC,KAAKH,KAAL,GAAa,CAAb,GAAiB,CAACc,KAAK,GAAG,CAAT,IAAcjB,aAAOwB,KAAP,CAAaC,OAA5C,IACA,KAAKnB,SAAL,IAAkB,MANpB,CADD,EAQE;AACD,AGRC,ADAA,aFQID,CGRA,ADAA,OFQL,GAAgB,SAAhB;AACA,AGRE,ADAA,AEwBJ,OJrES,AIqEJ,CJdJ,GIcQP,CAAC,GAAG,CDxBL4E,ADAAA,AEwBR,EAAgB5E,CAAC,GAAGE,KDxBD,ADAA,CEwBO,CAACwB,CDxBLF,ADAAA,ICAI,ADAA,AEwBN,CDxBOC,ADAAA,AEwBMwE,IAAjC,CDxBsB,ADAA,CCCjB9F,ADAAA,AEuBkCH,CAAC,EAAxC,EAA4C,CDvBjC,ADAA,CCACD,ADAAA,CCAP,ADAA,GCAWG,ADAAA,aCAOwB,ADAAA,KCAP,ADAA,CCAaC,ADAAA,OCDP,ADAA,CCAlB,ADAA;ACGA,ADAA,AEsBH,SAAK,IAAI5B,CAAC,EDtBH8E,ADAAA,CEsBM,CAAb,EAAgB9E,CAAC,GAAGG,GDtBF,ADAA,GCAGsB,ADAAA,AEsBK,CAACE,GDtBF,ADAA,CCACD,ADAAA,CEsBN,CAAawE,GDtBZ,ADAA,CCCjB9F,ADAAA,AEqBJ,EAAuCJ,CAAC,EAAxC,CDrBU,ADAA,CCACC,ADAAA,AEqBiC,CDrBxC,ADAA,GCAWE,ADAAA,aCAOwB,ADAAA,KCAP,ADAA,CCAaC,ADAAA,OCDP,ADAA,CCAlB,ADAA;ACGA,ADAA,AEoBF,cAAQV,KDpBCgD,ADAAA,ICAI,ADAA,AEoBI,CAACjE,CAAD,CAAT,CDpBS4E,ADAAA,AEoBI7E,CAAb,CAAR,SDpBS,ADAA,ICAuBmE,ADAAA,ICAI,ADAA,ICAIW,ADAAA,WCAtC,ADAA;AFKH,AGJG,ADAA,AEoBD,UJhBE,CGZF,ADAA,CCQE,ADAA,CEoBG,CAAL,CJhBOvE,MAAL,GAAc,KAAKM,AGJb,ADAA,EFIN,GAAwBiB,aAAOC,MAAnC,EAA2C;AAC1C,AGJE,ADAA,AEoBAK,UAAAA,CAAC,CAACG,CJhBCtC,CAAL,GAAS,CAAT,CGJS,ADAA,EEoBP,GDpBA,ADAA,AEoBcE,MAAM,CAAC6F,MAAP,CAAcxE,KAA5B;AJfF,AGJE,ADAA,AEoBA;ADnBD,ADAA,SCZD,ADAA,CCDyB,ADAA;AFkB1B,AGlB0B,ADAA,AEiCxB,ODjCF,ADAA,GFkBI,GIeG,CAAL,CJfOxB,CAAL,GAAS8B,aAAOE,KAApB,EAA2B;AAC1B,AIeEI,UAAAA,CAAC,CAACG,CJfCvC,CAAL,GAAS,CAAT,GIeE,GAAcG,MAAM,CAAC6F,MAAP,CAAcG,OAA5B;AJdF,AGLD,ADAA,AEoBG,UDpBC9B,ADAAA,uBCAuB,ADAA,ECA3B,ADAA,ECA+B,ADAA;ACC9B,ADAA,YCAIU,ADAAA,OCAO,ADAA,GCAGC,ADAAA,oBCAcC,ADAAA,MCAd,ADAA,CCCb,ADAA,UCAAF,ADAAA,OCAO,ADAA;AFKT,AGLS,ADAA,AEmBP,UJdE,GIcG,CAAL,CJdO/E,CAAL,CGJD+E,ADAAA,EFIU,CAAb,EAAgB,EGJN,ADAA,CCACG,ADAAA,OCAR,ADAA,CCAgBlF,ADAAA,CCAhB,ADAA,ICAqBoB,ADAAA,KCArB,ADAA,ICA8B2D,ADAAA,OCAO,ADAA,CCACG,ADAAA,OCAR,ADAA,CCAgBjF,ADAAA,CCAhB,ADAA,ICAqBkB,ADAAA,KCD7C,ADAA;AFMR,AGNQ,ADAA,AEoBNiB,SDrBY,ADAA,CEqBZA,CDlBA,ADAA,AEkBC,CDrBW,ADAA,AEqBVG,CJdCvC,AGPL,ADAA,CFOA,GAAS8B,IIcP,GAAc3B,MJdA6B,AIcM,CAACgE,IJdvB,EIcgB,CAAcI,SAA5B;AJbF,AIcE,OJhFK,CAoER;AGNC,ADAA,aCAKtC,ADAAJ,KAAL,GAAaqB,ICAb,GAAoB7D,ADAA,CAACiE,IAAR,CAAanF,CAAb,GAAiBG,MCAAgB,KAAV,EAAiBC,ADAAO,KCAjB,ADAU,CCA9B,ADA2CC,OAA3C;AACA,AEkBC,aFlBI+B,AEkBC,CAAL,IFlBD,GAAaoB,OAAO,CAACI,IAAR,CAAalF,CAAb,GAAiBE,aAAOwB,KAAP,CAAaC,OAA3C;AFMD,AGNC,ADCA,AEkBEQ,UAAAA,CAAC,CDnBC,ACmBAG,CFlBCuB,CFKE,GGNEA,EHMGtD,EIaV,GAAcL,CFlBhB,EFKD,CELqBe,CCDhB,CCmBkB,CAAC8E,EDnBE,CAAzB,EAA4B,CCmBZ,CAAcM,KAA5B,CFlB4BnF,KAAV,EAAiBC,KAAjB,CAApB;AFMA,AGNA,ADCA,AEkBE,aJbG,AELAwC,ECDAF,KAAL,CDCA,CFKA,CGNaqB,CDCG,IAAhB,ECDoB,CAACI,IAAR,CAAanF,CAAb,GAAiBG,aAAOwB,KAAP,CAAaC,OAA3C;AHOC,AGND,ADCA,aAAKiC,EFKCnD,AGNDiD,EHMJ,GAAU,AGNX,CHMC,EGNYoB,GDCb,GAAqB,CCDD,CAACI,EDCrB,ECDa,CAAalF,CAAb,GAAiBE,aAAOwB,KAAP,CAAaC,OAA3C;AHOC,AGNA,ADCDV,AEiBC,aAAK,CAAL,CJZKL,EAAL,GAAUY,IAAI,AELLN,CFKMc,GAAL,CACT,AENF,EAAiBb,GFMVP,EAAL,AENF,GFMYV,CENc,CAA1B,WFMmBQ,OAAP,CAAeuB,OADhB,EAET/B,aAAOQ,OAAP,CAAeG,QAFN,CAAV;AAIA,AERD,AEiBEsB,OF5BH,GE4BGA,CAAC,CAACG,CFjBE,EFQAtC,CAAL,CERSqE,GFQC,CIST,GAAcnE,CJTAU,EAAf,GISqB,CAACmF,MAAP,CFjBe,AEiBDK,EFjBxB,EAA6B,AEiBjC;AJRD,AGVD,ADEA,AEiBE,aDnBGzC,ADEAA,QCFL,ADEA,GCFgB,ADEA,ICFhB,ADEA;ACDA,ADEA,AECA,aDHKC,ADEAA,aCFL,ADEA,GCFqB,ADEA,ICFrB,CDEA;AFQA,AGTA3C,ADEA,aFOK,SAAL,EGTUC,KAAV,EAAiBC,KAAjB,IAA0B,CAA1B;AHUC,AGTD,ACkBAgB,MAAAA,CD/BD,AC+BE,CAACC,IAAF,CDlBM,EHSA3B,EAAL,AGTS4D,GHUR,KAAK7D,SAAL,IAAkB,AGVW,EAAzB,EAA6B,GHUjC,GACGN,aAAOQ,OAAP,CAAeC,KADlB,GAEG,CAACT,aAAOQ,OAAP,CAAeC,KAHpB;AAIA,AGZDgF,ADED,AEgBCxD,MAAAA,CAAC,CDlBDwD,ACkBEtD,EFhBCoC,KFUG7D,AGZC,CAACgF,CHYP,AIMD,EDlBA,CHYW,AGZC,CHYX,QEVqB,ECFtB,IDE4B,KAAKjC,QAAlC,EAA4C;AFW1C,AGZD,ADEA,AEgBAxB,MAAAA,CAAC,CAACiD,KDlBGzB,ADEAzB,EFUCnC,CAAL,AIMD,CFhBA,AEiBCA,CAAC,EJPS,CGZX,ACmBKG,GDnBW,CHYAO,EAAf,AIOU,CAACiB,CDnBZ,ICmBK,CAAaC,OADlB,EAEC3B,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAaC,OAFlB,EAGC5B,CAAC,GAAGG,MAAM,CAACwB,KAAP,CAAaC,OAAjB,GAA2BzB,MAAM,CAACwB,KAAP,CAAaC,OAHzC,EAIC3B,CAAC,GAAGE,MAAM,CAACwB,KAAP,CAAaC,OAAjB,GAA2BzB,MAAM,CAACwB,KAAP,CAAaC,OAJzC;AJLC,AGZD,ADEA,AEqBAQ,MAAAA,CAAC,CAACO,IAAF,CDvBKkB,aAAL,GAAqB,KAArB;AHJD,AGKC,ADEA,AEqBAzB,MAAAA,CJjGO,AEyER,AEwBE,CJTF,AISGQ,KFrBI,IAAI2B,AEqBV,kBFrB4B,EAAtB,EAA0B;AAChCS,AEqBA5C,MAAAA,CAAC,CAACS,OAAF,aFrBcuC,OAAd,CAAsB,UAAAL,OAAO,EAAI;ACDlC,ADEE,AEqBD,UDvBGL,IDGDK,OAAO,CAACI,IAAR,CAAanF,CAAb,CCHoB,GDInByB,GCJyB,CDIrB,CAACC,GCJyBkC,EDI9B,CAAW,KCJf,ADImB,CAACF,CCJwB,IDI7B,GAAavD,aAAOwB,KAAP,CAAaC,OAArC,CADD,IAEAmD,OAAO,CAACI,IAAR,CAAalF,CAAb,IACCwB,IAAI,CAACC,KAAL,CAAW,KAAI,CAACiC,KAAL,GAAaxD,aAAOwB,KAAP,CAAaC,OAArC,CAJF,EAKE;AFMJ,AGZC,ADOEmD,AEgBH,GAvCkB,CAwCnB,OJZM1E,CELF0E,CCPG5C,EHYN,EGZC,CHYW,CELF,CAAC+C,GFKMlF,CAAL,GAAS,AELlB,CAAgBA,CAAhB,GFKuBE,AELHgE,IAApB,EFKH;AACA,AGZC,ADOEa,WFKEzE,CELFyE,IFKH,GAAa,AELH,CAACG,IFKOlF,CAAL,EELV,CFKmB,AELHC,CAAhB,GAAoBkE,CFKIjE,GELxB,GFKH;AACA,AGZC,ADOE,OCVH,IHeKK,EGZE,IHYP,AGZWgE,GHYG,KAAKtE,CAAL,GAAS,KAAKC,CGZC,EAAtB,EAA0B,CHYjC;AAEA,AGbC,ADOC,AEeH,MAAIC,GFzBF,EFgBIgC,CGbA2D,ACsBI,CAAC/B,EJTV,EISG,GDtBF,CCsBiB,QAAnB,EAA6B;AJR5B,AGbC,ACsBDN,IAAAA,OAAO,CDtBFsC,ACsBGe,MAAR,EDtBC;ADOA5F,AEgBD,GAFD,MAEO,eFhBKiD,IAAV,EAAgBD,IAAhB,IAAwB,KAAKJ,YAA7B;ACNAkB,ADOA,AEgBDhB,IAAAA,QAAQ,CFhBFJ,AEgBGkD,MAAT,EFhBC,GAAgB,ICPF1B,CDOd,MCPA,CAAsB,UAAAL,OAAO,EAAI;AAChC,ACuBF,GA7CkB,CA+CnB,UDxBIA,OAAO,CAACI,IAAR,CHYG,AGZUnF,CAAb,IACCyB,IAAI,CAACC,KAAL,CAAW,KAAI,CAACgC,KAAL,GAAavD,aAAOwB,KAAP,CAAaC,OAArC,CADD,IAEAmD,OAAO,CAACI,IAAR,CAAalF,CAAb,IACCwB,IAAI,CAACC,KAAL,CAAW,KAAI,CAACiC,KAAL,GAAaxD,aAAOwB,KAAP,CAAaC,OAArC,CAJF,EAKE;AHSJQ,AGRG0D,ADCF,YCDEA,ADCE,EFOHzD,GEPQwB,CFOV,EGRW,GAAGkB,OAAO,ADCpB,CCDqBI,CDCG,GCDX,CAAanF,CAAxB;AACA+F,ADCD3D,YCDC2D,MDCCxD,ECDO,GAAGwC,IDCZ,GCDmB,ADCL,CCDMI,IAAR,CAAalF,ADCzB,CCDC;AHQHmC,AGPG2C,ACkBJJ,EAAAA,OAAO,CAACS,EDlBJL,EHODzC,GIWH,CAAgB,CDlBL,CAAC6C,GHOX,CGPG,CAAanF,CAAb,ECkBYI,CDlBK8D,IAAjB,CAHC,ACqBiB,CDlBK;ADCxB9B,AEiBmB,WAAIhC,MAAM,CFjB3BiF,AEiB4ByB,MAAP,EFjBvB,AEiBmB,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","file":"game.ff0916f4.js","sourceRoot":"..","sourcesContent":["import { config } from \"../game.js\";\nimport { c } from \"../game.js\";\nimport { canvas } from \"../game.js\";\nimport { gameBoard } from \"../game.js\";\n\nexport default class Hopper {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.radius = config.hopper.radius;\n\t\t// Collision detectors\n\t\tthis.left = x - this.radius;\n\t\tthis.right = x + this.radius;\n\t\tthis.bottom = y + this.radius;\n\t\t// Movement\n\t\tthis.movement = \"falling\";\n\t\tthis.direction = \"right\";\n\t\t// Physics\n\t\tthis.dx = config.physics.speed;\n\t\tthis.dy = config.physics.speed;\n\t\tthis.terminal = config.terminal;\n\t}\n\n\tupdate() {\n\t\t// HELPER FUNCTIONS\n\t\tlet isWallToLeft = () => block.includes(gameBoard[gridY][gridX - 1]);\n\t\tlet isWallToRight = () => block.includes(gameBoard[gridY][gridX + 1]);\n\t\tlet isFloorBelowHopper = () =>\n\t\t\tblock.includes(gameBoard[gridY + 1][gridX]);\n\t\tlet isNoFloorBelowHopper = () =>\n\t\t\tempty.includes(gameBoard[gridY + 1][gridX]);\n\n\t\t// COLLISIONS\n\t\t// First translate current px coordinates as grid coordinates\n\t\tlet gridX = Math.floor(this.x / config.board.spacing);\n\t\tlet gridY = Math.floor(this.y / config.board.spacing);\n\n\t\tlet block = [1, 2]; // These correspond to blocks that hoppers can't move through\n\t\tlet empty = [0, 4]; // Correspond to empty squares or exit\n\n\t\tlet px_blockTop = (gridY + 1) * config.board.spacing; // y coordinate of top of block\n\n\t\t// Test collision with floor\n\t\tif (isFloorBelowHopper()) {\n\t\t\t// See if square below hopper is an impenetrable block\n\t\t\tif (this.bottom + this.dy > px_blockTop) {\n\t\t\t\tthis.movement = \"rolling\";\n\t\t\t\tthis.y = px_blockTop - this.radius; // Correcting position\n\t\t\t}\n\t\t}\n\n\t\t// Test collision with wall to the right of hopper\n\t\tif (isWallToRight()) {\n\t\t\tif (this.right > (gridX + 1) * config.board.spacing) {\n\t\t\t\tthis.direction = \"left\";\n\t\t\t}\n\t\t}\n\n\t\t// Test collision with wall to the left of hopper\n\t\tif (isWallToLeft()) {\n\t\t\tif (this.left < gridX * config.board.spacing) {\n\t\t\t\tthis.direction = \"right\";\n\t\t\t}\n\t\t}\n\n\t\t// Make hopper fall if it rolls off an edge\n\t\tif (\n\t\t\tthis.movement == \"rolling\" &&\n\t\t\tisNoFloorBelowHopper() &&\n\t\t\tthis.bottom + 1 > (gridY + 1) * config.board.spacing &&\n\t\t\t((this.left + 1 > gridX * config.board.spacing &&\n\t\t\t\tthis.direction == \"right\") ||\n\t\t\t\t(this.right - 1 < (gridX + 1) * config.board.spacing &&\n\t\t\t\t\tthis.direction == \"left\"))\n\t\t) {\n\t\t\tthis.movement = \"falling\";\n\t\t}\n\n\t\t// Wrap around\n\t\tif (this.bottom + this.dy > canvas.height) {\n\t\t\tthis.y = 0;\n\t\t}\n\n\t\tif (this.x > canvas.width) {\n\t\t\tthis.x = 0;\n\t\t}\n\n\t\tif (this.x < 0) {\n\t\t\tthis.x = canvas.width;\n\t\t}\n\n\t\t// MOVEMENT\n\t\tswitch (this.movement) {\n\t\t\tcase \"falling\":\n\t\t\t\tthis.dx = 0;\n\t\t\t\tthis.dy = Math.min(\n\t\t\t\t\tthis.dy + config.physics.gravity,\n\t\t\t\t\tconfig.physics.terminal\n\t\t\t\t);\n\t\t\t\tthis.y += this.dy;\n\t\t\t\tbreak;\n\t\t\tcase \"rolling\":\n\t\t\t\tthis.dx =\n\t\t\t\t\tthis.direction == \"right\"\n\t\t\t\t\t\t? config.physics.speed\n\t\t\t\t\t\t: -config.physics.speed;\n\t\t\t\tthis.dy = 0;\n\t\t\t\tthis.x += this.dx;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Update collision detectors\n\t\tthis.left = this.x - this.radius;\n\t\tthis.right = this.x + this.radius;\n\t\tthis.bottom = this.y + this.radius;\n\n\t\tthis.draw();\n\t}\n\n\tdraw() {\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.fillStyle = config.hopper.color;\n\t\tc.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n\t\tc.fill();\n\t\tc.closePath();\n\t\tc.restore();\n\t}\n}\n","export const mouse = { x: 900, y: 900 };\nexport let mousedown = false;\n\nimport { config } from \"./game.js\";\nimport { gameBoard } from \"./game.js\";\nimport { selector } from \"./game.js\";\nimport { painter } from \"./game.js\";\n\n// MOUSE\nwindow.addEventListener(\"mousemove\", () => {\n\tmouse.x = event.x;\n\tmouse.y = event.y;\n});\n\nwindow.addEventListener(\"mousedown\", () => {\n\tmousedown = true;\n});\nwindow.addEventListener(\"mouseup\", () => {\n\tmousedown = false;\n});\n\n// KEYBOARD\nexport const debugPanel = document.getElementById(\"debug-panel\");\nexport const btn_levelEditor = document.getElementById(\"level-editor\");\nexport const btn_playLevel = document.getElementById(\"play-level\");\n\nbtn_levelEditor.addEventListener(\"click\", () => {\n\tdebugPanel.innerHTML = \"Editing level\";\n\tpainter.x = null;\n\tpainter.y = null;\n\tpainter.homeX = null;\n\tpainter.homeY = null;\n\tpainter.dragging = false;\n\tpainter.draggingBlock = false;\n\tpainter.whatBlockWas = null;\n\tconfig.mode = \"editor\";\n});\nbtn_playLevel.addEventListener(\"click\", () => {\n\tdebugPanel.innerHTML = \"Playing level\";\n\tselector.x = null;\n\tselector.y = null;\n\tselector.homeX = null;\n\tselector.homeY = null;\n\tselector.dragging = false;\n\tselector.draggingBlock = false;\n\tselector.whatBlockWas = null;\n\tconfig.mode = \"play\";\n});\n","import { config } from \"../game.js\";\nimport { c } from \"../game.js\";\nimport { canvas } from \"../game.js\"\nimport { gameBoard } from \"../game.js\";\nimport { homeAddresses } from \"../game.js\";\nimport { mouse } from \"../eventListeners.js\";\nimport { mousedown } from \"../eventListeners.js\";\nimport { hoppers } from \"../game.js\";\n\n// During init() we log all movable blocks and create an array of objects that stores the block's home address\n// and current address. Initially home and current are the same.\n// When user first drags a block, its home address is stored in this selector object.\n// Then when user drags the block to another location, we search the 'addresses' array\n// for an object that matches the home address stored in this selector.\n// Its new location is then stored in 'current'.\n// The implication of this is that when the user goes to drag the block again, we loop through this process\n// Only this time, the current address is different to the home address.\n// The home address is referenced when dragging the block around, so that we can't pull the block\n// more than one square away in any direction.\n// Doing things this way means we don't have to have an object for every block, which\n// gives primacy to the level map.\n// This makes life easier when it comes to being able to edit levels etc.\n// We also don't have to loop through a list of block objects every frame, because collisions are handled by\n// the hopper object which only checks for collisions within one square of itself,\n// and the loops in this object are only called when we drag a block.\n\nexport default class Selector {\n\tconstructor() {\n\t\tthis.x = null;\n\t\tthis.y = null;\n\t\tthis.homeX = null;\n\t\tthis.homeY = null;\n\t\tthis.dragging = false;\n\t\tthis.draggingBlock = false;\n\t\tthis.whatBlockWas = null;\n\t}\n\n\tupdate() {\n\t\tlet gridX = Math.floor(mouse.x / config.board.spacing);\n\t\tlet gridY = Math.floor(mouse.y / config.board.spacing);\n\t\tlet newX = Math.floor(this.x / config.board.spacing);\n\t\tlet newY = Math.floor(this.y / config.board.spacing);\n\n\t\t// Helper functions\n\t\tlet isOverlappingBlock = () => {\n\t\t\ttry {\n\t\t\t\treturn gameBoard[gridY][gridX] == 1;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tlet hasStartedDraggingBlock = () =>\n\t\t\t!this.dragging && mousedown && isOverlappingBlock();\n\t\tlet isDraggingEmptySquare = () =>\n\t\t\t!this.dragging && mousedown && !isOverlappingBlock();\n\t\tlet hasStoppedDragging = () => this.dragging && !mousedown;\n\t\tlet isPainting = () => mousedown && this.draggingBlock;\n\t\tlet squareIsEmpty = () => {\n\t\t\ttry {\n\t\t\t\treturn gameBoard[gridY][gridX] == 0;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\tlet isOverlappingHopper = () =>\n\t\t\thoppers.some(hopper => {\n\t\t\t\ttry {\n\t\t\t\t\tlet hopperGridX = Math.floor(\n\t\t\t\t\t\thopper.x / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\tlet hopperGridY = Math.floor(\n\t\t\t\t\t\thopper.y / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\treturn newX == hopperGridX && newY == hopperGridY;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (hasStartedDraggingBlock()) {\n\t\t\tlet address = homeAddresses.filter(\n\t\t\t\taddress =>\n\t\t\t\t\taddress.current.x == gridX && address.current.y == gridY\n\t\t\t)[0];\n\t\t\tthis.homeX = address.home.x * config.board.spacing;\n\t\t\tthis.homeY = address.home.y * config.board.spacing;\n\t\t\tthis.whatBlockWas = gameBoard[gridY][gridX];\n\t\t\tthis.dragging = true;\n\t\t\tthis.draggingBlock = true;\n\t\t\tgameBoard[gridY][gridX] = 0;\n\t\t} else if (isDraggingEmptySquare()) {\n\t\t\tthis.dragging = true;\n\t\t\tthis.draggingBlock = false;\n\t\t}\n\n\t\tif (isOverlappingHopper() && this.dragging) {\n\t\t\tthis.draw();\n\t\t\treturn;\n\t\t} else if (hasStoppedDragging()) {\n\t\t\thomeAddresses.forEach(address => {\n\t\t\t\tif (\n\t\t\t\t\taddress.home.x ==\n\t\t\t\t\t\tMath.floor(this.homeX / config.board.spacing) &&\n\t\t\t\t\taddress.home.y ==\n\t\t\t\t\t\tMath.floor(this.homeY / config.board.spacing)\n\t\t\t\t) {\n\t\t\t\t\taddress.current.x = newX;\n\t\t\t\t\taddress.current.y = newY;\n\t\t\t\t}\n\t\t\t});\n\t\t\tgameBoard[newY][newX] = this.whatBlockWas;\n\t\t\tthis.dragging = false;\n\t\t\tif (this.draggingBlock) {\n\t\t\t\tc.fillStyle = \"pink\";\n\t\t\t\tc.fillRect(\n\t\t\t\t\tthis.x,\n\t\t\t\t\tthis.y,\n\t\t\t\t\tconfig.board.spacing,\n\t\t\t\t\tconfig.board.spacing\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.draggingBlock = false;\n\t\t} else if (\n\t\t\tisPainting() &&\n\t\t\tsquareIsEmpty() &&\n\t\t\tmouse.x < this.homeX + config.board.spacing * 2 && // Skip these if you want to drag the block anywhere, e.g. during level editing.\n\t\t\tmouse.x > this.homeX - config.board.spacing && \n\t\t\tmouse.y < this.homeY + config.board.spacing * 2 &&\n\t\t\tmouse.y > this.homeY - config.board.spacing &&\n\t\t\tmouse.x < canvas.width &&\n\t\t\tmouse.x >= 0 &&\n\t\t\tmouse.y < canvas.height &&\n\t\t\tmouse.y >= 0\n\t\t) {\n\t\t\tthis.x =\n\t\t\t\tMath.floor(mouse.x / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t\tthis.y =\n\t\t\t\tMath.floor(mouse.y / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t}\n\n\n\t\tif (isPainting()) {\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tdraw() {\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.shadowColor = \"white\";\n\t\tc.shadowBlur = 12;\n\t\tc.strokeStyle = \"rgb(255,191,0)\";\n\t\tc.fillStyle = \"rgba(150,50,100,0.2)\";\n\t\tc.rect(\n\t\t\tthis.homeX - config.board.spacing,\n\t\t\tthis.homeY - config.board.spacing,\n\t\t\tconfig.board.spacing * 3,\n\t\t\tconfig.board.spacing * 3\n\t\t);\n\t\tc.fill();\n\t\tc.stroke();\n\t\tc.closePath();\n\t\tc.restore();\n\n\t\tc.fillStyle = \"orange\";\n\t\tc.fillRect(this.x, this.y, config.board.spacing, config.board.spacing);\n\t}\n}\n","import { config } from \"../game.js\";\nimport { c } from \"../game.js\";\nimport { canvas } from \"../game.js\"\nimport { gameBoard } from \"../game.js\";\nimport { homeAddresses } from \"../game.js\";\nimport { mouse } from \"../eventListeners.js\";\nimport { mousedown } from \"../eventListeners.js\";\nimport { hoppers } from \"../game.js\";\n\n// During init() we log all movable blocks and create an array of objects that stores the block's home address\n// and current address. Initially home and current are the same.\n// When user first drags a block, its home address is stored in this selector object.\n// Then when user drags the block to another location, we search the 'addresses' array\n// for an object that matches the home address stored in this selector.\n// Its new location is then stored in 'current'.\n// The implication of this is that when the user goes to drag the block again, we loop through this process\n// Only this time, the current address is different to the home address.\n// The home address is referenced when dragging the block around, so that we can't pull the block\n// more than one square away in any direction.\n// Doing things this way means we don't have to have an object for every block, which\n// gives primacy to the level map.\n// This makes life easier when it comes to being able to edit levels etc.\n// We also don't have to loop through a list of block objects every frame, because collisions are handled by\n// the hopper object which only checks for collisions within one square of itself,\n// and the loops in this object are only called when we drag a block.\n\nexport default class Painter {\n\tconstructor() {\n\t\tthis.x = null;\n\t\tthis.y = null;\n\t\tthis.homeX = null;\n\t\tthis.homeY = null;\n\t\tthis.dragging = false;\n\t\tthis.draggingBlock = false;\n\t\tthis.whatBlockWas = null;\n\t}\n\n\tupdate() {\n\t\tlet gridX = Math.floor(mouse.x / config.board.spacing);\n\t\tlet gridY = Math.floor(mouse.y / config.board.spacing);\n\t\tlet newX = Math.floor(this.x / config.board.spacing);\n\t\tlet newY = Math.floor(this.y / config.board.spacing);\n\n\t\t// Helper functions\n\t\tlet isOverlappingBlock = () => {\n\t\t\ttry {\n\t\t\t\treturn [1,2,3,4].includes(gameBoard[gridY][gridX]);\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\n\t\tlet hasStartedDraggingBlock = () =>\n\t\t\t!this.dragging && mousedown && isOverlappingBlock();\n\t\tlet isDraggingEmptySquare = () =>\n\t\t\t!this.dragging && mousedown && !isOverlappingBlock();\n\t\tlet hasStoppedDragging = () => this.draggingBlock && !mousedown;\n\t\tlet isPainting = () => mousedown && this.draggingBlock;\n\t\tlet squareIsEmpty = () => {\n\t\t\ttry {\n\t\t\t\treturn gameBoard[gridY][gridX] == 0;\n\t\t\t} catch {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t\tlet isOverlappingHopper = () =>\n\t\t\thoppers.some(hopper => {\n\t\t\t\ttry {\n\t\t\t\t\tlet hopperGridX = Math.floor(\n\t\t\t\t\t\thopper.x / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\tlet hopperGridY = Math.floor(\n\t\t\t\t\t\thopper.y / config.board.spacing\n\t\t\t\t\t);\n\t\t\t\t\treturn newX == hopperGridX && newY == hopperGridY;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (hasStartedDraggingBlock()) {\n\t\t\tlet address = homeAddresses.filter(\n\t\t\t\taddress =>\n\t\t\t\t\taddress.current.x == gridX && address.current.y == gridY\n\t\t\t)[0];\n\t\t\tthis.whatBlockWas = gameBoard[gridY][gridX];\n\t\t\tif (this.whatBlockWas == 1) {\n\t\t\tthis.homeX = address.home.x * config.board.spacing;\n\t\t\tthis.homeY = address.home.y * config.board.spacing;\n\t\t\t}\n\t\t\tthis.dragging = true;\n\t\t\tthis.draggingBlock = true;\n\t\t\tgameBoard[gridY][gridX] = 0;\n\t\t} else if (isDraggingEmptySquare()) {\n\t\t\tconsole.log(\"empty boi\")\n\t\t\tthis.dragging = false;\n\t\t\tthis.draggingBlock = false;\n\t\t}\n\n\t\tif (isOverlappingHopper() && this.dragging) {\n\t\t\tthis.draw();\n\t\t\treturn;\n\t\t} else if (hasStoppedDragging()) {\n\t\t\tlet oldHomeX;\n\t\t\tlet oldHomeY;\n\t\t\thomeAddresses.forEach(address => {\n\t\t\t\tif (\n\t\t\t\t\taddress.home.x ==\n\t\t\t\t\t\tMath.floor(this.homeX / config.board.spacing) &&\n\t\t\t\t\taddress.home.y ==\n\t\t\t\t\t\tMath.floor(this.homeY / config.board.spacing)\n\t\t\t\t) {\n\t\t\t\t\toldHomeX = address.home.x;\n\t\t\t\t\toldHomeY = address.home.y;\n\t\t\t\t\taddress.home.x = newX; // set new home if edit mode\n\t\t\t\t\taddress.home.y = newY;\n\t\t\t\t\taddress.current.x = newX;\n\t\t\t\t\taddress.current.y = newY;\n\t\t\t\t}\n\t\t\t});\n\t\t\tgameBoard[newY][newX] = this.whatBlockWas;\n\t\t\t// if (this.whatBlockWas == 1) {\n\t\t\t// \tgameBoard[oldHomeY][oldHomeX] = 0;\n\t\t\t// }\n\t\t\t\n\n\t\t\tthis.dragging = false;\n\t\t\tif (this.draggingBlock) {\n\t\t\t\tc.fillStyle = config.colors.list[this.whatBlockWas];\n\t\t\t\tc.fillRect(\n\t\t\t\t\tthis.x,\n\t\t\t\t\tthis.y,\n\t\t\t\t\tconfig.board.spacing,\n\t\t\t\t\tconfig.board.spacing\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.draggingBlock = false;\n\t\t} else if (\n\t\t\tisPainting() &&\n\t\t\tsquareIsEmpty() &&\n\t\t\t// mouse.x < this.homeX + config.board.spacing * 2 && // Skip these if you want to drag the block anywhere, e.g. during level editing.\n\t\t\t// mouse.x > this.homeX - config.board.spacing && \n\t\t\t// mouse.y < this.homeY + config.board.spacing * 2 &&\n\t\t\t// mouse.y > this.homeY - config.board.spacing &&\n\t\t\tmouse.x < canvas.width &&\n\t\t\tmouse.x >= 0 &&\n\t\t\tmouse.y < canvas.height &&\n\t\t\tmouse.y >= 0\n\t\t) {\n\t\t\tthis.x =\n\t\t\t\tMath.floor(mouse.x / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t\tthis.y =\n\t\t\t\tMath.floor(mouse.y / config.board.spacing) *\n\t\t\t\tconfig.board.spacing;\n\t\t}\n\n\n\t\tif (isPainting()) {\n\t\t\tthis.draw();\n\t\t}\n\t}\n\n\tdraw() {\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.strokeStyle = \"white\";\n\t\tc.shadowColor = \"white\";\n\t\tc.shadowBlur = 12;\n\t\tc.fillStyle = config.colors.list[this.whatBlockWas];\n\t\tc.rect(this.x, this.y, config.board.spacing, config.board.spacing);\n\t\tc.fillRect(this.x, this.y, config.board.spacing, config.board.spacing);\n\t\tc.stroke();\n\t\tc.closePath();\n\t\tc.restore();\n\t}\n}","import Hopper from \"./classes/Hopper.js\";\nimport Selector from \"./classes/Selector.js\";\nimport Painter from \"./classes/Painter.js\";\nimport {debugPanel} from \"./eventListeners\";\n\nexport const config = {\n\tboard: {\n\t\tsize: 16,\n\t\tspacing: 32\n\t},\n\n\thopper: {\n\t\tcolor: \"green\",\n\t\tradius: 9\n\t},\n\n\tmode: \"random\",\n\n\tphysics: {\n\t\tgravity: 0.3,\n\t\tspeed: 1.5,\n\t\tterminal: 9.8\n\t},\n\n\tcolors: {\n\t\tempty: \"black\",\n\t\tmovable: \"pink\",\n\t\timmovable: \"grey\",\n\t\texit: \"white\",\n\t\tspawn: \"blue\",\n\t}\n};\nconfig.colors.list = [config.colors.empty, config.colors.movable, config.colors.immovable, config.colors.spawn, config.colors.exit]\n\nexport const canvas = document.querySelector(\"canvas\");\nexport const c = canvas.getContext(\"2d\");\ncanvas.width = config.board.size * config.board.spacing;\ncanvas.height = config.board.size * config.board.spacing;\n\nexport const level = {\n\tcolor: \"pink\"\n};\n\nexport let homeAddresses = [];\nexport const gameBoard = [\n\t[0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 2, 1, 2, 0, 1, 0, 0, 0, 0, 0, 0],\n\t[0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],\n\t[0, 0, 1, 0, 1, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0],\n\t[0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 2, 2, 1, 0, 0],\n\t[0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n\t[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] // <- stops falling errors occuring\n];\n\nexport let hoppers = [];\nexport const selector = new Selector();\nexport const painter = new Painter();\nfunction init() {\n\tdebugPanel.innerHTML = \"Playing level\"\n\thoppers = [];\n\thoppers.push(new Hopper(48, 0));\n\n\tfor (let y = 0; y < config.board.size; y++) {\n\t\tfor (let x = 0; x < config.board.size; x++) {\n\t\t\tif (gameBoard[y][x] == 1) {\n\t\t\t\thomeAddresses.push({\n\t\t\t\t\thome: { x: x, y: y },\n\t\t\t\t\tcurrent: { x: x, y: y }\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction gameLoop() {\n\trequestAnimationFrame(gameLoop);\n\n\tc.fillStyle = \"black\";\n\tc.fillRect(0, 0, canvas.width, canvas.height);\n\tc.fill();\n\n\t// Draw game board\n\tfor (let y = 0; y < config.board.size; y++) {\n\t\tfor (let x = 0; x < config.board.size; x++) {\n\t\t\tswitch (gameBoard[y][x]) {\n\t\t\t\tcase 0:\n\t\t\t\t\tc.fillStyle = config.colors.empty;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tc.fillStyle = config.colors.movable;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tc.fillStyle = config.colors.immovable;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tc.fillStyle = config.colors.spawn;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tc.fillStyle = config.colors.exit;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tc.save();\n\t\t\tc.beginPath();\n\t\t\tc.fillRect(\n\t\t\t\tx * config.board.spacing,\n\t\t\t\ty * config.board.spacing,\n\t\t\t\tx * config.board.spacing + config.board.spacing,\n\t\t\t\ty * config.board.spacing + config.board.spacing\n\t\t\t);\n\t\t\tc.fill();\n\t\t\tc.closePath();\n\t\t\tc.restore();\n\t\t}\n\t}\n\t// Update and draw selector\n\tif (config.mode == \"editor\") {\n\t\tpainter.update();\n\t} else {\n\t\tselector.update();\n\t}\n\n\t// Update and draw hoppers\n\thoppers.forEach(hopper => hopper.update());\n}\n\ninit();\ngameLoop();\n"]}